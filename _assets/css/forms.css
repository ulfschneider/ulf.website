@layer components {
  :root {
    --form-error-border-width: 2px;
    --form-input-border-width: 1px;
  }

  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  input[list],
  input[type="submit"],
  input[type="reset"],
  button,
  select,
  textarea,
  fieldset,
  label,
  legend {
    @apply font-body placeholder-meta mode-caret-primary  appearance-none rounded-none font-normal text-inherit;
  }

  input[type="submit"],
  input[type="reset"],
  button,
  .button {
    @apply mode-bg-primary px-ryt-sm py-ryt-sm cursor-pointer border-0 align-baseline text-white text-balance;
  }

  input[type="submit"]:hover,
  input[type="reset"]:hover,
  button:hover,
  .button:hover,
  input[type="submit"]:active,
  input[type="reset"]:active,
  button:active,
  .button:active {
    @apply brightness-110;
  }

  input[type="submit"]:disabled,
  input[type="reset"]:disabled,
  button:disabled,
  .button:disabled {
    @apply cursor-not-allowed opacity-75;
  }

  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  select,
  textarea {
    @apply dark:text-write-bright;
  }

  label {
    @apply cursor-pointer;
  }

  label > * {
    @apply my-ryt-xs;
  }

  label,
  legend {
    @apply block align-baseline font-bold;
  }

  form .hint {
    @apply text-meta font-normal;
  }

  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  input[list],
  select {
    @apply border-meta p-ryt-xs bg-field-light dark:bg-field-dark max-w-screen-rg w-full border align-middle leading-none;
  }

  select {
    @apply max-w-max cursor-pointer overflow-ellipsis pr-[2.5em] align-baseline;

    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' fill='none'%3E%3Cpath vector-effect='non-scaling-stroke' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' d='M26 12 16 22 6 12'/%3E%3C/svg%3E");
    background-repeat: no-repeat, repeat;
    background-position: right 0.7em top 50%, 0 0;
    background-size: 1em auto, 100%;
  }

  @media (prefers-color-scheme: dark) {
    select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' fill='none'%3E%3Cpath vector-effect='non-scaling-stroke' stroke='#fff' stroke-linecap='round' stroke-linejoin='round' d='M26 12 16 22 6 12'/%3E%3C/svg%3E");
    }
  }

  textarea {
    @apply border-meta py-ryt-xs px-ryt-xs bg-field-light dark:bg-field-dark resize-none border font-normal leading-snug;
  }

  fieldset {
    @apply border-none p-0;
  }

  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="password"]:focus,
  input[type="search"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[list]:focus,
  select:focus,
  textarea:focus {
    @apply border-transparent;
  }

  @supports (appearance: none) {
    /*using https://fonts.google.com/icons for the SVGs herein */

    :root {
      --unchecked-radio: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 -960 960 960" width="2em" fill="currentColor"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>');
      --checked-radio: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 -960 960 960" width="2em" fill="currentColor"><path d="M480-280q83 0 141.5-58.5T680-480q0-83-58.5-141.5T480-680q-83 0-141.5 58.5T280-480q0 83 58.5 141.5T480-280Zm0 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>');
      --unchecked-checkbox: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 -960 960 960" width="2em" fill="currentColor"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Z"/></svg>');
      --checked-checkbox: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 -960 960 960" width="2em" fill="currentColor"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q8 0 15 1.5t14 4.5l-74 74H200v560h560v-266l80-80v346q0 33-23.5 56.5T760-120H200Zm261-160L235-506l56-56 170 170 367-367 57 55-424 424Z"/></svg>');
    }

    label:has(input[type="radio"]:not(.native)) {
      @apply flex flex-row gap-ryt items-center max-w-fit;
    }
    input[type="radio"]:not(.native) {
      appearance: none;
      font-size: inherit;
      cursor: pointer;
      border-radius: 50%;
      margin: 0;
    }
    input[type="radio"]:not(.native)::after {
      /* preload images */
      position: absolute;
      width: 0;
      height: 0;
      overflow: hidden;
      z-index: -1;
      content: var(--unchecked-radio) var(--checked-radio);
    }

    input[type="radio"]:not(.native)::before {
      content: var(--unchecked-radio);
      margin-bottom: -0.4em;
      display: block;
    }
    input[type="radio"]:not(.native):checked::before {
      content: var(--checked-radio);
    }

    label:has(input[type="checkbox"]:not(.native):not([switch])) {
      @apply flex flex-row gap-ryt items-center max-w-fit;
    }

    input[type="checkbox"]:not(.native):not([switch]) {
      appearance: none;
      font-size: inherit;
      cursor: pointer;
      margin: 0;
    }

    input[type="checkbox"]:not(.native):not([switch])::after {
      /* preload images */
      position: absolute;
      width: 0;
      height: 0;
      overflow: hidden;
      z-index: -1;
      content: var(--unchecked-checkbox) var(--checked-checkbox);
    }

    input[type="checkbox"]:not(.native):not([switch])::before {
      content: var(--unchecked-checkbox);
      margin-bottom: -0.4em;
      display: block;
    }
    input[type="checkbox"]:not(.native):not([switch]):checked::before {
      content: var(--checked-checkbox);
    }
  }
}
